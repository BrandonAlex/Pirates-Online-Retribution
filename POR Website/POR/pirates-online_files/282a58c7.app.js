"use strict";angular.module("wixApp",["ngRoute","wix","appServices"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/app.html",controller:"MainCtrl",resolve:{settingsData:["settingsService","languageService","$wix",function(a,b,c){var d="site"===c.Utils.getViewMode();return a.getSettings(d).then(function(a){return"noSettings"===a.data.settings?b.getDefaultSettings():a.data.settings},function(a){console.log("error",a)})}]}}).otherwise({redirectTo:"/"})}]),angular.module("wixApp").controller("MainCtrl",["$scope","$wix","settingsService","settingsData","languageService","$timeout",function(a,b,c,d,e,f){function g(b){var c=!1;b.some(function(b){return a.isLanguagesEqual(b,a.selectedSiteLanguage)?(c=!0,!0):void 0}),c||f(function(){a.selectedSiteLanguage=a.params.siteLanguages[0]})}function h(){a.params.siteLanguages.some(function(b){return-1!==b.language.shortName.indexOf(a.userLang)?(a.selectedSiteLanguage=b,!0):void 0})}function i(){a.selectedSiteLanguage=a.params.siteLanguages[e.getDefaultLanguageIndex(a.params.siteLanguages)],"basedOnUser"===a.params.redirection.value&&(h(),b.navigateToPage(a.selectedSiteLanguage.homePage.id.toString()))}a.params=d,a.userLang=angular.lowercase(navigator.language||navigator.userLanguage).substring(0,2),a.handleSettingsUpdateEvent=function(b){var c=Object.keys(b)[0],d=b[Object.keys(b)[0]];a.$apply(function(){"siteLanguages"===c&&g(d),a.params[c]=d,a.saveSettings()})},a.handleSitePublishedEvent=function(){b.getSiteInfo(function(b){a.params.baseSiteUrl=b.baseUrl,c.saveSettings(a.params,0,!0)})},a.saveSettings=function(){c.saveSettings(a.params,1e3,!1)},a.navigateToHomeLanguagePage=function(c){a.selectedSiteLanguage=c,b.navigateToPage(c.homePage.id)},a.isLanguagesEqual=function(a,b){return angular.equals(a,b)},a.init=function(){"editor"!==b.Utils.getViewMode()&&i(),"mobile"===Wix.Utils.getDeviceType()&&(a.params.showLanguageName=!1)},b.addEventListener(b.Events.SETTINGS_UPDATED,a.handleSettingsUpdateEvent),b.addEventListener(b.Events.SITE_PUBLISHED,a.handleSitePublishedEvent),a.init()}]),angular.module("wix",[]),angular.module("wix").factory("$wix",["$location",function(a){var b=a.absUrl();return Wix.Utils.getInstance=function(){var a=/.*instance=([\[\]a-zA-Z0-9\.\-_]*?)(&|$|#).*/g,c=a.exec(b);return c&&c[1]?c[1]:void 0},Wix}]),angular.module("wix").factory("settingsService",["$http","$location","$timeout","$q","$wix",function(a,b,c,d,e){var f=null,g=e.Utils.getInstance(),h="localhost"!==b.host()?b.host():"localhost:8080";h="http://"+h+"/";var i={en:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},fr:{newEditor:{link1:"https://fr.wix.com/support/html5/new-wix-editor-2015/plus-100506/kb/tutoriel-cr%C3%A9er-un-site-multilingue-4421311",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://fr.wix.com/support/html5/commencer/mod%C3%A8les/kb/tutoriel-cr%C3%A9er-un-site-multilingue",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},es:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},it:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},de:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},ru:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},pt:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},ja:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}},ko:{newEditor:{link1:"https://www.wix.com/support/html5/wix-app-market/apps-made-by-wix/kb/adding-and-setting-up-the-wix-multilingual-app",link2:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-1-duplicate-your-pag",link3:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-2-translate-your-pag",link4:"https://www.wix.com/support/html5/new-wix-editor-june-2015/more/kb/walk-through-creating-a-multilingual-site-6246778#step-3-create-a-menu-usin"},oldEditor:{link1:"https://www.wix.com/support/html5/editor/apps/kb/setting-up-the-wix-multilingual-app-old-editor",link2:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-your-main-language",link3:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-translate-your-site-to-sp",link4:"https://www.wix.com/support/html5/getting-started/templates/kb/walk-through-creating-a-multilingual-site#anchor-create-a-menu-using-butto"}}},j=function(a,b){var c=i.en[b?"newEditor":"oldEditor"];return c[a]};return{getSettings:function(b){return a.get(h+"load?instance="+g+"&isSite="+b)},saveSettings:function(b,e,i){var j=d.defer();return f&&c.cancel(f),f=c(function(){a.post(h+"save?instance="+g+"&isSite="+i,{settings:b}).then(j.resolve,j.reject),f=null},e),j.promise},updateScrollBar:function(){c(function(){angular.element("body").trigger("uilib-update-scroll-bars")},600)},updateSettings:function(a,b){var c={};c[a]=b,e.Settings.triggerSettingsUpdatedEvent(c)},openPage:function(a,b){window.open(j(a,b),"_blank","toolbar=yes, scrollbars=yes, resizable=yes, top=75, left=75, width=900, height=700")}}}]),angular.module("appServices",[]),angular.module("appServices").factory("languageService",["$wix",function(a){function b(a){if("en"===a)return[{language:d[9],homePage:f},{language:d[18],homePage:f}];var b=c(a);return[{language:b,homePage:f},{language:d[9],homePage:f}]}function c(a){var b={};return d.some(function(c){return-1!==c.shortName.indexOf(a)?(b=c,!0):void 0}),b}var d=[{language:"Danish",flag:"Denmark",nativeName:"dansk",shortName:["da"]},{language:"Swedish",flag:"Sweden",nativeName:"svenska",shortName:["sv"]},{language:"Norwegian",flag:"Norway",nativeName:"norsk",shortName:["no"]},{language:"Czech",flag:"Czech Republic",nativeName:"čeština",shortName:["cs"]},{language:"Greek",flag:"Greece",nativeName:"ελληνικά",shortName:["el"]},{language:"Romanian",flag:"Romania",nativeName:"română",shortName:["ro"]},{language:"Hungarian",flag:"Hungary",nativeName:"magyar",shortName:["hu"]},{language:"Thai",flag:"Thailand",nativeName:"ภาษาไทย",shortName:["th"]},{language:"Finish",flag:"Finland",nativeName:"suomi",shortName:["fi"]},{language:"English",flag:"Usa",nativeName:"",shortName:["en"]},{language:"English",flag:"Uk",nativeName:"",shortName:["en"]},{language:"English",flag:"Australia",nativeName:"",shortName:["en"]},{language:"English",flag:"Canada",nativeName:"",shortName:["en"]},{language:"English",flag:"South Africa",nativeName:"",shortName:["en"]},{language:"English",flag:"New Zealand",nativeName:"",shortName:["en"]},{language:"French",flag:"France",nativeName:"français",shortName:["fr"]},{language:"French",flag:"Canada",nativeName:"français - Canada",shortName:["fr-ca","fr"]},{language:"French",flag:"Suisse",nativeName:"français - Suisse",shortName:["fr-ch","fr"]},{language:"Spanish",flag:"Spain",nativeName:"español",shortName:["es"]},{language:"Spanish",flag:"Mexico",nativeName:"español - Mexico",shortName:["es"]},{language:"Spanish",flag:"Colombia",nativeName:"español - Colombia",shortName:["es"]},{language:"German",flag:"Germany",nativeName:"Deutsch",shortName:["de"]},{language:"German",flag:"Austria",nativeName:"Deutsch - Austria",shortName:["de"]},{language:"Portuguese",flag:"Brazil",nativeName:"português - Brazil",shortName:["pt"]},{language:"Portuguese",flag:"Portugal",nativeName:"português",shortName:["pt"]},{language:"Italian",flag:"Italy",nativeName:"italiano",shortName:["it"]},{language:"Dutch",flag:"Netherlands",nativeName:"",shortName:["nl"]},{language:"Polish",flag:"Poland",nativeName:"polski",shortName:["pl"]},{language:"Croatian",flag:"Croatia",nativeName:"hrvatski",shortName:["hr"]},{language:"Latvian",flag:"Latvia",nativeName:"latviešu",shortName:["lv"]},{language:"Russian",flag:"Russia",nativeName:"Русский",shortName:["ru"]},{language:"Bulgarian",flag:"Bulgaria",nativeName:"български",shortName:["bg"]},{language:"Ukrainian",flag:"Ukraine",nativeName:"Українська",shortName:["uk"]},{language:"Arabic",flag:"United Arab Emirates",nativeName:"العربية",shortName:["ar-sa","ar-iq","ar-eg","ar-ly","ar-dz","ar-ma","ar-tn","ar-om","ar-ye","ar-sy","ar-jo","ar-lb","ar-kw","ar-ae","ar-bh","ar-aq","ar"]},{language:"Hebrew",flag:"Israel",nativeName:"עברית",shortName:["he"]},{language:"Japanese",flag:"Japan",nativeName:"日本語",shortName:["ja"]},{language:"Korean",flag:"Korea",nativeName:"한국어",shortName:["ko"]},{language:"Turkish",flag:"Turkey",nativeName:"Türkçe",shortName:["tr"]},{language:"Chinese",flag:"China",nativeName:"中文",shortName:["zh"]},{language:"Lithuanian",flag:"Lithuania",nativeName:"Lietuvių",shortName:["lt"]},{language:"Indonesian",flag:"Indonesia",nativeName:"Bahasa Indonesia",shortName:["id"]},{language:"Welsh",flag:"Wales",nativeName:"Cymraeg",shortName:["cy"]}],e={showFlags:!0,showLanguageName:!0,redirection:{value:"basedOnUser",index:0},currentLanguageFontStyle:{bold:!1,italic:!1},languageNameFontStyle:{bold:!1,italic:!1},languageHoverFontStyle:{bold:!1,italic:!1},showInstructions:!0,step:1},f={title:"Select Page",id:"mainPage"},g=function(){return angular.copy(d)},h=function(a){var b={homePage:f},c=[];return a.forEach(function(a){c.push(a.language)}),d.some(function(a){var d=!1;return c.some(function(b){angular.equals(a,b)&&(d=!0)}),d?void 0:(b.language=a,!0)}),angular.copy(b)},i=function(){var c=angular.copy(e);return c.siteLanguages=b(a.Utils.getLocale()),c.siteLanguages[0]["default"]=!0,c},j=function(a){for(var b=[],c=0;c<a.length;++c)if(b.push(a[c]),a[c].subPages)for(var d=0;d<a[c].subPages.length;++d)b.push(a[c].subPages[d]);return b},k=function(a){var b=0;return a.some(function(a,c){a["default"]&&(b=c)}),b};return{getDefaultLanguageIndex:k,getLanguageList:g,getNewLanguageModel:h,getDefaultSettings:i,getSitePagesArray:j}}]),angular.module("wixApp").directive("language",function(){return{restrict:"E",templateUrl:"views/directives/language.html",scope:{language:"=language",showFlags:"=showflags",showName:"=showname"}}}),angular.module("appServices").filter("capitalizeFirstLetter",function(){return function(a){return a?a.substring(0,1).toUpperCase()+a.substring(1):a}}),angular.module("wixApp").filter("noSpace",function(){return function(a){return a?a.replace(/\s+/g,""):a}});