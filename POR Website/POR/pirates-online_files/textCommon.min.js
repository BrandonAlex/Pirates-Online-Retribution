define("textCommon/bi/events.json",[],function(){return{UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}}}}),define("textCommon/bi/events",["utils","textCommon/bi/events.json"],function(a,b){"use strict";var c=a.logger;return c.register("core","event",b),b}),define("textCommon/utils/filterHtmlString",["lodash","xss","experiment","textCommon/bi/events"],function(a,b,c,d){"use strict";function e(){var c={strike:[],hatul:[]},d=["color","background-color","font-size","font-family","font-style","text-decoration","line-height","text-shadow","direction"];a.assign(b.whiteList,c),b.whiteList.a.push("data-anchor"),a.forOwn(b.whiteList,function(a){a.push("style"),a.push("class"),a.push("dir")}),a.forEach(d,function(a){b.cssFilter.options.whiteList[a]=!0})}function f(a,c,d,e){return b.safeAttrValue(a,c,d,e)}function g(b,c){var d=a.find(b,c);d?d.count++:b.push(a.assign(c,{count:1}))}function h(a,b){return"style"===a.toLowerCase()&&""===b}function i(a,b,c,e){e(d.UNSAFE_HTML_IN_TEXT_COMPONENT,{filtered_content:JSON.stringify(a),component_id:b,component_type:c})}function j(b){return a.some(a.values(b),a.size)}if(b)return e(),function(a,d,e,l){var m={tags:[],attrs:[],attrValues:[]},n=b(a,{onIgnoreTag:function(a){var b={tagName:a};g(m.tags,b)},onIgnoreTagAttr:function(a,b){var c={tagName:a,attrName:b};g(m.attrs,c)},safeAttrValue:function(a,b,c,d){var e=f(a,b,c,d);if(e)return e;if(!h(b,c)){var i={tagName:a,attrName:b,attrValue:c};g(m.attrValues,i)}return""}});return c.isOpen("sv_textCompFilter")&&j(m)&&i(m,e,d,l),c.isOpen("sv_safeHtmlString")?n:a}}),define("textCommon/mixins/textCompMixin",["lodash","react","core","santaProps","textCommon/utils/filterHtmlString"],function(a,b,c,d,e){"use strict";return{propTypes:{reportBI:d.Types.reportBI.isRequired,id:d.Types.Component.id.isRequired,skin:d.Types.Component.skin.isRequired,style:d.Types.Component.style.isRequired,structure:d.Types.Component.structure.isRequired,title:b.PropTypes.string},mixins:[c.compMixins.skinBasedComp],componentWillMount:function(){this.updateHTML(this.props)},updateHTML:function(a){this.convertCompDataTextToHTML(a),this._componentHtml=e(this._componentHtml,this.constructor.displayName,this.santaTypesProps.id,this.santaTypesProps.reportBI)},componentWillReceiveProps:function(a){this.updateHTML(a)},getRootStyle:function(b){var c=a.clone(b||{});return"hidden"!==(c["overflow-y"]||c.overflowY)&&(c.height="auto"),c},getSkinProperties:function(){this.lastScale=a.get(this,"santaTypesProps.structure.layout.scale")||1;var d,b=this.santaTypesProps.skin,c={"":{style:this.getRootStyle(this.santaTypesProps.style)}};d="wysiwyg.viewer.skins.WRichTextSkin"===b||"wysiwyg.viewer.skins.WRichTextClickableSkin"===b?c.richTextContainer={}:c[""],d.dangerouslySetInnerHTML={__html:this._componentHtml||""},this.santaTypesProps.title&&(c[""].title=this.santaTypesProps.title);var e=a.get(this.props,["compProp","overrideAlignment"]);return e&&(d.className=this.classSet(a.zipObject(["override-"+e],[!0]))),c}}}),define("textCommon/mixins/textScaleMixin",["lodash","skins","fonts","santaProps","siteUtils"],function(a,b,c,d,e){"use strict";function g(a,b){return e.mobileUtils.convertFontSizeToMobile(a,b)}var f=c.fontUtils;return{propTypes:{structure:d.Types.Component.structure,compTheme:d.Types.Component.theme,skin:d.Types.Component.skin,isMobileView:d.Types.isMobileView,getFont:d.Types.Fonts.getFont},componentWillReceiveProps:function(){this.lastScale=a.get(this,"props.structure.layout.scale")||1},getFontSize:function(){var a={};if(this.santaTypesProps.isMobileView){var b=this.getDesktopFontSize();b&&(a.fontSize=g(b,this.santaTypesProps.structure.layout.scale)+"px")}return a},getDesktopFontSize:function(){var c=this.santaTypesProps.compTheme,d=a.get(c,["style","properties","fnt"])||a.get(b,["skins",this.santaTypesProps.skin,"paramsDefaults","fnt"]);if(d){var e=this.santaTypesProps.getFont(d)||d;return parseInt(f.parseFontStr(e).size,10)}}}}),define("textCommon/utils/textTransforms",["lodash","siteUtils","coreUtils","color"],function(a,b,c,d){"use strict";function k(a,b,c){var d=a(c),e=j.parseFontStr(d).color.replace(/[{}]/g,""),f=b(e);return f}function l(a,b){var c=a(b);if(!c)return null;var d=parseFloat(j.parseFontStr(c).size.replace("px",""));return d}function m(a,b){a=j.normalizeColorStr(a);var c=new d(a);"#000000"===c.hexString()&&(c=new d("#121212"));var e=c.hslArray()[2]*b;return c.lightness(e),c.hslString()}var e=new RegExp('<[^>]+style="([^\\s]+\\s)*\\s*color[^_][^>]+>',"g"),f=new RegExp("<[^>]+font-size: ?\\d+px[^>]+>","g"),g=new RegExp('<[^>]+"color_\\d+[^>]+>',"g"),h=new RegExp("<[^>]+font_\\d+[^>]+>","g"),i=new RegExp("<[^>]+>","g"),j=c.cssUtils;return{setMobileBrightness:function(a,b,c,d){return b&&1!==parseFloat(b)?a=a.replace(i,function(a){var f,i;if(a.match(e)){var j=a.match(/color *:[^;^"]+/)[0];f=j.split(/: */)[1],i=m(f,parseFloat(b));var l="color: "+i;a=a.replace(/color *:[^;^"]+/,l)}else if(a.match(g)){var n=a.match(/color_\d+/)[0];f=d(n),i=m(f,parseFloat(b)),a=/style="/.test(a)?a.replace(/style="/,function(a){return a+="color: "+i+";"}):a.replace("class=",'style="color: '+i+';" class=')}else if(a.match(h)){var o=a.match(/font_\d+/)[0];f=k(c,d,o),i=m(f,b),a=/style="/.test(a)?a.replace(/style="/,function(a){return a+="color: "+i+";"}):a.replace("class=",'style="color: '+i+';" class=')}return a}):a},setMobileFontSize:function(a,c,d){return c?(c=parseFloat(c),a=a.replace(i,function(a){var e,g;if(a.match(f))a=a.replace(/font-size: ?\d+px/,function(a){return e=parseFloat(a.match(/\d+/)[0]),g=Math.round(b.mobileUtils.convertFontSizeToMobile(e,c)),a=a.replace(/\d+/,g)});else if(a.match(h)){var i=a.match(/font_\d+/)[0];e=l(d,i),e&&(g=Math.round(b.mobileUtils.convertFontSizeToMobile(e,c)),a=/style="/.test(a)?a.replace(/style="/,function(a){return a+="font-size: "+g+"px;"}):a.replace("class=",'style="font-size: '+g+'px;" class='))}return a})):a}}}),define("textCommon/utils/textComponentsUtils",["lodash","coreUtils","textCommon/utils/textTransforms"],function(a,b,c){"use strict";function f(b,c,d){var e=a.transform(c,function(a,b){a["#"+b.id]=b},{});return b.replace(/<a ([^>]*)dataquery="([^"]+)"([^>]*)>/g,function(b,c,f,g){var h=d(e[f]);return"<a "+c+a.map(h,function(a,b){return b+'="'+a+'"'}).join(" ")+g+">"})}function g(a,b){return b.isMobileView?(a=c.setMobileBrightness(a,b.brightness,b.fontGetter,b.colorGetter),a=c.setMobileFontSize(a,b.scale,b.fontGetter)):a}function h(a){var b=a.isMobileView?[]:[e.PHONE];return d.generateAnchorsInHtml(a.htmlContent,b)}var d=b.anchorTagsGenerator,e=b.textPatternRecognizer.Pattern;return{convertDataQueryLinksIntoHtmlAnchors:f,mobileTextTransformIfNeeded:g,createImpliedLinks:h}}),define("textCommon",["textCommon/mixins/textCompMixin","textCommon/mixins/textScaleMixin","textCommon/utils/textComponentsUtils"],function(a,b,c){"use strict";return{textCompMixin:a,textScaleMixin:b,textComponentsUtils:c}});